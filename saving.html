<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>GrowFi - Saving Strategies</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div class="module-container">
        <header class="module-header">
            <a href="dashboard.html" class="btn-back">‚Üê Back to Dashboard</a>
            <h1>üè¶ Saving Strategies</h1>
        </header>

        <section class="module-content">
            <div class="concept-box">
                <h2>Why Save Money?</h2>
                <ul class="concept-list">
                    <li>üìå <strong>Emergency Fund:</strong> Save 3-6 months of expenses for unexpected situations.</li>
                    <li>üìå <strong>Future Goals:</strong> Set realistic saving goals (car, education, vacation).</li>
                    <li>üìå <strong>50-30-20 Rule:</strong> Allocate 50% for needs, 30% for wants, 20% for savings.</li>
                </ul>
            </div>

            <div class="task-box">
                <h2>Your Task: Set a Saving Goal</h2>
                <p>Define a realistic saving goal for the next 12 months. A goal is realistic if you can save it from your monthly surplus.</p>

                <div class="form-group">
                    <label for="monthlyIncome2">Monthly Income (‚Çπ):</label>
                    <input type="number" id="monthlyIncome2" placeholder="e.g., 50000" min="0">
                </div>

                <div class="form-group">
                    <label for="monthlyExpenses2">Monthly Expenses (‚Çπ):</label>
                    <input type="number" id="monthlyExpenses2" placeholder="e.g., 35000" min="0">
                </div>

                <div class="form-group">
                    <label for="savingGoal">Annual Saving Goal (‚Çπ):</label>
                    <input type="number" id="savingGoal" placeholder="e.g., 100000" min="0">
                </div>

                <button class="btn btn-primary" onclick="validateSavingGoal()">Validate Goal</button>

                <div id="savingResult" class="result-box hidden">
                    <p id="savingResultMessage"></p>
                    <p id="savingInfo"></p>
                </div>
            </div>
        </section>
    </div>

    <script src="script.js"></script>
    <script>
        // Saving module logic
        function validateSavingGoal() {
            const income = parseFloat(document.getElementById('monthlyIncome2').value);
            const expenses = parseFloat(document.getElementById('monthlyExpenses2').value);
            const savingGoal = parseFloat(document.getElementById('savingGoal').value);
            const resultDiv = document.getElementById('savingResult');
            const resultMessage = document.getElementById('savingResultMessage');
            const savingInfo = document.getElementById('savingInfo');

            // Validation
            if (isNaN(income) || isNaN(expenses) || isNaN(savingGoal)) {
                alert('Please enter valid numbers');
                return;
            }

            if (income === 0 || savingGoal === 0) {
                alert('Income and saving goal cannot be zero');
                return;
            }

            resultDiv.classList.remove('hidden');

            // Calculate monthly surplus
            const monthlySurplus = income - expenses;
            const maxAnnualSavings = monthlySurplus * 12;

            // Check if goal is realistic
            if (monthlySurplus > 0 && savingGoal <= maxAnnualSavings) {
                resultMessage.innerHTML = '‚úÖ <strong>Realistic Goal!</strong>';
                savingInfo.textContent = `You can save ‚Çπ${monthlySurplus.toFixed(2)} monthly. Your ‚Çπ${savingGoal} annual goal is achievable!`;
                
                // Award badge and points with financial tip (FEATURE 2)
                awardBadge('saving', 'Smart Saver', 50);
            } else if (monthlySurplus <= 0) {
                resultMessage.innerHTML = '‚ùå <strong>Goal Not Realistic!</strong>';
                savingInfo.textContent = `Your expenses equal or exceed income. First balance your budget, then set saving goals.`;
            } else {
                resultMessage.innerHTML = '‚ùå <strong>Goal Too High!</strong>';
                savingInfo.textContent = `Your monthly surplus is ‚Çπ${monthlySurplus.toFixed(2)}. Maximum annual savings: ‚Çπ${maxAnnualSavings.toFixed(2)}. Reduce your goal.`;
            }
        }

        // Prevent access if not logged in
        function checkAccess() {
            const userStr = localStorage.getItem('currentUser');
            if (!userStr) {
                window.location.href = 'index.html';
            }
        }

        checkAccess();
    </script>
</body>
</html>